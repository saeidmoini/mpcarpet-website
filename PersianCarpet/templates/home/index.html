{% extends "base.html" %}
{% load static %}

{% block head_assets %}
<link rel="stylesheet" href="{% static 'home/globals.css' %}">
<link rel="stylesheet" href="{% static 'home/styleguid.css' %}">
<link rel="stylesheet" href="{% static 'home/style.css' %}">
<link rel="stylesheet" href="{% static 'fonts/fonts.css' %}">
{% endblock %}

{% block body_attrs %} dir="rtl" class="page-home"{% endblock %}

{% block body %}
  <div class="home-page">
    <div class="slider-container">
      <div class="slider">
        <div class="slide active">
          <img
            src="{% static 'img/image 36.png' %}"
            alt="فرش 1"
            class="slide-image"
          />
        </div>
        <div class="slide">
          <img
            src="{% static 'img/image 45.png' %}"
            alt="فرش 2"
            class="slide-image"
          />
        </div>
        <div class="slide">
          <img
            src="{% static 'img/image 46.png' %}"
            alt="فرش 3"
            class="slide-image"
          />
        </div>
      </div>

      <!-- گرادینت overlay -->
      <div class="slider-overlay"></div>

      <!-- کنترل‌های اسلایدر -->
      <div class="slider-controls">
        <button class="control-btn prev-btn" aria-label="اسلاید قبلی">
          <svg
            width="24"
            height="24"
            viewBox="0 0 24 24"
            fill="none"
            xmlns="http://www.w3.org/2000/svg"
          >
            <path
              d="M15 19L8 12L15 5"
              stroke="currentColor"
              stroke-width="2"
              stroke-linecap="round"
              stroke-linejoin="round"
            />
          </svg>
        </button>

        <div class="slider-dots">
          <button
            class="dot active"
            data-index="0"
            aria-label="رفتن به اسلاید 1"
          ></button>
          <button
            class="dot"
            data-index="1"
            aria-label="رفتن به اسلاید 2"
          ></button>
          <button
            class="dot"
            data-index="2"
            aria-label="رفتن به اسلاید 3"
          ></button>
        </div>

        <button class="control-btn next-btn" aria-label="اسلاید بعدی">
          <svg
            width="24"
            height="24"
            viewBox="0 0 24 24"
            fill="none"
            xmlns="http://www.w3.org/2000/svg"
          >
            <path
              d="M9 5L16 12L9 19"
              stroke="currentColor"
              stroke-width="2"
              stroke-linecap="round"
              stroke-linejoin="round"
            />
          </svg>
        </button>
      </div>
    </div>
    {% comment %} <div class="rectangle"></div> {% endcomment %}
    <div class="group">
      <img class="polygon" src="{% static 'img/Polygon 1.png' %}" />
      <img class="img" src="{% static 'img/Polygon 2.png' %}" />
      <img class="polygon-2" src="{% static 'img/Polygon 3.png' %}" />
    </div>

    <div class="frame">
      <div class="div">
        <div class="frame-2">
          <p class="text-wrapper">فرشی فراتر از کف‌پوش، هویت خانه شما</p>
          <img class="line" src="{% static 'img/Line 8.png' %}" />
          <p class="p">زیبایی جاودانه‌ای که خانه شما لایق آن است</p>
        </div>
        <div class="frame-3">
          <p class="text-wrapper-2">
            فروش فقط از طریق نمایندگی / تماس مستقیم
          </p>
          <div class="div-wrapper">
            <div class="text-wrapper-3">مشاهده نمایندگی‌ها</div>
          </div>
        </div>
      </div>
    </div>
    <div class="group-3">
      <div class="text-wrapper-4">ARTISTRY</div>
      <div class="frame-4">
        <p class="text-wrapper-5">
          «ما باور داریم که فرش تنها یک پوشش برای زمین نیست، بلکه تابلویی از
          هنر، فرهنگ و هویت است. مجموعه ما با سال‌ها تجربه در عرضه‌ی فرش‌های
          اصیل و مدرن، تلاش می‌کند تا ترکیبی از زیبایی، کیفیت و اصالت را به
          خانه‌های شما بیاورد. هر فرش، داستانی دارد؛ داستانی از هنر دست یا
          طراحی مدرن که ماندگار و منحصر به فرد است. هدف ما این است که هر خانه
          با انتخاب شما، جلوه‌ای تازه و باشکوه پیدا کند.
        </p>
        <div class="frame-5">
          <div class="text-wrapper-6">ادامه داستان ما</div>
        </div>
      </div>
      <div class="group-4">
        <div class="frame-6">
          <div class="islamic-pattern">
            <div class="vector-wrapper">
              <img class="vector" src="{% static 'img/vector-2.png' %}" />
            </div>
          </div>
          <div class="frame-7">
            <p class="text-wrapper-7">ریشه در اصالت،<br />نگاه به آینده</p>
            <img class="line-2" src="{% static 'img/Line 8.png' %}" />
          </div>
        </div>
        <div class="image-wrapper">
          <img class="image-2" src="{% static 'img/image 45.png' %}" />
        </div>
      </div>
    </div>

    <div class="group-5">
      <div class="text-wrapper-8">GALLERY</div>
      <div class="frame-8">
        <div class="group-wrapper">
          <div class="vector-wrapper">
            <img class="vector" src="{% static 'img/vector-2.png' %}" />
          </div>
        </div>
        <div class="frame-wrapper">
          <div class="frame-9">
            <p class="text-wrapper-9">نگاهی به آثار هنری ما</p>
            <img class="line-2" src="{% static 'img/Line 8.png' %}" />
          </div>
        </div>
        <div class="islamic-pattern-2">
          <div class="vector-wrapper">
            <img class="vector" src="{% static 'img/vector-2.png' %}" />
          </div>
        </div>
        <div class="islamic-pattern-3">
          <div class="vector-wrapper">
            <img class="vector" src="{% static 'img/vector-2.png' %}" />
          </div>
        </div>
      </div>
      <div class="frame-10">
        <div class="text-wrapper-10">مشاهده همه</div>
      </div>
      <div class="frame-11">
        <button class="carousel-next-btn">
          <img class="vector-2" src="{% static 'img/Vector 4.png' %}" />
        </button>

        <img class="line-3" src="{% static 'img/Line 11.png' %}" />
        <button class="carousel-prev-btn">
          <img class="vector-3" src="{% static 'img/Vector 5.png' %}" />
        </button>
      </div>
      <div id="gallery" class="frame-12">
        <div class="frame-13">
          <div class="text-wrapper-11">۱۲۰۰ شانه</div>
          <div class="text-wrapper-11">۷۰۰ شانه</div>
          <div class="text-wrapper-12">۳۰۰ شانه</div>
        </div>

        <div class="product-carousel-container">
          <div class="product-carousel-track">
            <!-- اسلاید 1 -->
            <div class="frame-15 carousel-item">
              <div class="img-wrapper">
                <img class="image-3" src="{% static 'img/image 48.png' %}" />
              </div>
              <div class="frame-2">
                <div class="text-wrapper-13">فرش تابان</div>
                <div class="frame-16">
                  <div class="text-wrapper-14">پلی پروپیلین</div>
                  <span class="line-4"></span>
                  <div class="text-wrapper-14">تراکم ۹۶۰</div>
                  <span class="line-4"></span>
                  <p class="div-2">
                    {% comment %} <span class="span">۳۰۰ ش</span> {% endcomment %}
                    <span class="text-wrapper-15">۳۰۰ شانه</span>
                  </p>
                </div>
              </div>
            </div>

            <!-- اسلاید 2 -->
            <div class="frame-15 carousel-item">
              <div class="img-wrapper">
                <img class="image-4" src="{% static 'img/image 49.png' %}" />
              </div>
              <div class="frame-2">
                <div class="text-wrapper-13">فرش سحر</div>
                <div class="frame-16">
                  <div class="text-wrapper-16">پلی پروپیلین</div>
                  <span class="line-4"></span>
                  <div class="text-wrapper-16">تراکم ۹۶۰</div>
                  <span class="line-4"></span>
                  <div class="text-wrapper-16">۳۰۰ شانه</div>
                </div>
              </div>
            </div>

            <!-- اسلاید 3 -->
            <div class="frame-15 carousel-item">
              <div class="img-wrapper">
                <img class="image-5" src="{% static 'img/image 47.png' %}" />
              </div>
              <div class="frame-2">
                <div class="text-wrapper-13">فرش آذین</div>
                <div class="frame-16">
                  <div class="text-wrapper-16">پلی پروپیلین</div>
                  <span class="line-4"></span>
                  <div class="text-wrapper-16">تراکم ۹۶۰</div>
                  <span class="line-4"></span>
                  <div class="text-wrapper-16">۳۰۰ شانه</div>
                </div>
              </div>
            </div>

            <!-- اسلاید 4 -->
            <div class="frame-15 carousel-item">
              <div class="img-wrapper">
                <img class="image-3" src="{% static 'img/image 46.png' %}" />
              </div>
              <div class="frame-2">
                <div class="text-wrapper-13">فرش نقشینه</div>
                <div class="frame-16">
                  <div class="text-wrapper-16">پلی پروپیلین</div>
                  <span class="line-4"></span>
                  <div class="text-wrapper-16">تراکم ۹۶۰</div>
                  <span class="line-4"></span>
                  <div class="text-wrapper-16">۳۰۰ شانه</div>
                </div>
              </div>
            </div>

            <!-- اسلاید 5 (تکرار اسلاید 1) -->
            <div class="frame-15 carousel-item">
              <div class="img-wrapper">
                <img class="image-3" src="{% static 'img/image 48.png' %}" />
              </div>
              <div class="frame-2">
                <div class="text-wrapper-13">فرش تابان</div>
                <div class="frame-16">
                  <div class="text-wrapper-14">پلی پروپیلین</div>
                  <span class="line-4"></span>
                  <div class="text-wrapper-14">تراکم ۹۶۰</div>
                  <span class="line-4"></span>
                  <p class="div-2">
                    {% comment %} <span class="span">۳۰۰ ش</span> {% endcomment %}
                    <span class="text-wrapper-15">۳۰۰ شانه</span>
                  </p>
                </div>
              </div>
            </div>

            <!-- اسلاید 6 (تکرار اسلاید 2) -->
            <div class="frame-15 carousel-item">
              <div class="img-wrapper">
                <img class="image-4" src="{% static 'img/image 49.png' %}" />
              </div>
              <div class="frame-2">
                <div class="text-wrapper-13">فرش سحر</div>
                <div class="frame-16">
                  <div class="text-wrapper-16">پلی پروپیلین</div>
                  <span class="line-4"></span>
                  <div class="text-wrapper-16">تراکم ۹۶۰</div>
                  <span class="line-4"></span>
                  <div class="text-wrapper-16">۳۰۰ شانه</div>
                </div>
              </div>
            </div>

            <!-- اسلاید 7 (تکرار اسلاید 3) -->
            <div class="frame-15 carousel-item">
              <div class="img-wrapper">
                <img class="image-5" src="{% static 'img/image 47.png' %}" />
              </div>
              <div class="frame-2">
                <div class="text-wrapper-13">فرش آذین</div>
                <div class="frame-16">
                  <div class="text-wrapper-16">پلی پروپیلین</div>
                  <span class="line-4"></span>
                  <div class="text-wrapper-16">تراکم ۹۶۰</div>
                  <span class="line-4"></span>
                  <div class="text-wrapper-16">۳۰۰ شانه</div>
                </div>
              </div>
            </div>

            <!-- اسلاید 8 (تکرار اسلاید 4) -->
            <div class="frame-15 carousel-item">
              <div class="img-wrapper">
                <img class="image-3" src="{% static 'img/image 46.png' %}" />
              </div>
              <div class="frame-2">
                <div class="text-wrapper-13">فرش نقشینه</div>
                <div class="frame-16">
                  <div class="text-wrapper-16">پلی پروپیلین</div>
                  <span class="line-4"></span>
                  <div class="text-wrapper-16">تراکم ۹۶۰</div>
                  <span class="line-4"></span>
                  <div class="text-wrapper-16">۳۰۰ شانه</div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <script>
        class ProductCarousel {
          constructor() {
            this.container = document.querySelector(
              ".product-carousel-container"
            );
            this.track = document.querySelector(".product-carousel-track");
            this.items = Array.from(
              document.querySelectorAll(".product-carousel-track .carousel-item")
            );
            this.prevBtn = document.querySelector(".carousel-prev-btn");
            this.nextBtn = document.querySelector(".carousel-next-btn");

            this.currentPosition = 0;
            this.itemsPerView = 1;
            this.itemWidth = 0;
            this.gap = 0;
            this.maxPosition = 0;
            this.resizeTimer = null;

            this.init();
          }

          init() {
            if (!this.container || !this.track || this.items.length === 0) {
              return;
            }

            this.bindEvents();
            this.calculateItemWidth();
          }

          bindEvents() {
            this.prevBtn?.addEventListener("click", () => this.prev());
            this.nextBtn?.addEventListener("click", () => this.next());

            window.addEventListener("resize", () => {
              clearTimeout(this.resizeTimer);
              this.resizeTimer = setTimeout(
                () => this.calculateItemWidth(),
                150
              );
            });
          }

          resolveItemsPerView() {
            const width = window.innerWidth || document.documentElement.clientWidth;
            if (width <= 540) {
              return 1;
            }
            if (width <= 768) {
              return 2;
            }
            if (width <= 1200) {
              return 3;
            }
            return 3.8;
          }

          readNumericStyle(target, property) {
            const value = parseFloat(
              window.getComputedStyle(target).getPropertyValue(property)
            );
            return Number.isNaN(value) ? 0 : value;
          }

          calculateItemWidth() {
            this.itemsPerView = this.resolveItemsPerView();

            const paddingLeft = this.readNumericStyle(
              this.container,
              "padding-left"
            );
            const paddingRight = this.readNumericStyle(
              this.container,
              "padding-right"
            );
            const availableWidth =
              this.container.clientWidth - paddingLeft - paddingRight;

            const gapValue =
              this.readNumericStyle(this.track, "gap") ||
              this.readNumericStyle(this.track, "column-gap") ||
              this.readNumericStyle(this.track, "grid-column-gap");
            this.gap = gapValue;

            const totalGapWidth =
              this.gap * Math.max(0, this.itemsPerView - 1);

            const rawWidth =
              (availableWidth - totalGapWidth) / this.itemsPerView;
            this.itemWidth = Math.max(rawWidth, 0);

            this.items.forEach((item) => {
              item.style.width = `${this.itemWidth}px`;
            });

            const trackWidth =
              (this.itemWidth + this.gap) * this.items.length - this.gap;
            this.track.style.width = `${Math.max(trackWidth, 0)}px`;

            this.maxPosition = Math.max(
              0,
              this.items.length - Math.ceil(this.itemsPerView)
            );

            if (this.currentPosition > this.maxPosition) {
              this.currentPosition = this.maxPosition;
            }

            this.moveTrack();
          }

          next() {
            if (this.currentPosition < this.maxPosition) {
              this.currentPosition += 1;
            } else {
              this.currentPosition = 0;
            }
            this.moveTrack();
          }

          prev() {
            if (this.currentPosition > 0) {
              this.currentPosition -= 1;
            } else {
              this.currentPosition = this.maxPosition;
            }
            this.moveTrack();
          }

          moveTrack() {
            const distance = this.currentPosition * (this.itemWidth + this.gap);
            this.track.style.transform = `translateX(-${distance}px)`;
          }
        }

        document.addEventListener("DOMContentLoaded", () => {
          new ProductCarousel();
        });
      </script>
    </div>
    <div class="text-wrapper-20">CONTACT</div>
    <img class="frame-23" src="{% static 'img/vector-2.png' %}" />
    <div class="text-wrapper-21">AGENTS</div>
    <div class="frame-24">
      <div class="frame-25">
        <div class="frame-26">
          <div class="frame-9">
            <p class="text-wrapper-22">
              هر کجا هستید، نزدیک‌ترین نمایندگی کنار شماست
              <img class="image-25" src="{% static 'img/Line 8.png' %}" />
            </p>
          </div>
        </div>
        <p class="text-wrapper-23">
          فرش پرشین را از معتبرترین نمایندگی‌های ما در شهرهای مختلف ایران تهیه
          کنید.
        </p>
      </div>
      <div class="frame-27">
        <div class="text-wrapper-24">مشاهده نمایندگی‌ها</div>
      </div>
    </div>
    <img class="mask-group" src="{% static 'img/Mask group.png' %}" />
    <img class="ellipse-2" src="{% static 'img/Ellipse 20.png' %}" />
    <img class="ellipse-3" src="{% static 'img/Ellipse 20.png' %}" />
    <div class="ellipse-4"></div>
    <img class="ellipse-5" src="{% static 'img/Ellipse 20.png' %}" />
    <img class="ellipse-6" src="{% static 'img/Ellipse 20.png' %}" />
    <img class="ellipse-7" src="{% static 'img/Ellipse 20.png' %}" />
    <img class="ellipse-8" src="{% static 'img/Ellipse 20.png' %}" />
    <img class="ellipse-9" src="{% static 'img/Ellipse 20.png' %}" />
    <img class="ellipse-10" src="{% static 'img/Ellipse 20.png' %}" />
    <img class="ellipse-11" src="{% static 'img/Ellipse 20.png' %}" />
    <img class="ellipse-12" src="{% static 'img/Ellipse 20.png' %}" />
    <img class="ellipse-13" src="{% static 'img/Ellipse 20.png' %}" />
    <img class="ellipse-14" src="{% static 'img/Ellipse 20.png' %}" />
    <img class="ellipse-15" src="{% static 'img/Ellipse 20.png' %}" />
    <img class="ellipse-16" src="{% static 'img/Ellipse 20.png' %}" />
    <img class="ellipse-17" src="{% static 'img/Ellipse 20.png' %}" />
    <img class="ellipse-18" src="{% static 'img/Ellipse 20.png' %}" />
    <img class="ellipse-19" src="{% static 'img/Ellipse 20.png' %}" />
    <img class="union" src="{% static 'img/Union.png' %}" />
    <div class="text-wrapper-25">مشهد</div>
    <div class="group-6">
      <img class="figma-cursor" src="{% static 'img/Figma Cursor.svg' %}" />
      <img
        class="figma-cursor-stroke"
        src="{% static 'img/Figma Cursor (Stroke).svg' %}"
      />
    </div>
    {% include "home/footer.html" %}
    {% include "home/_navbar.html" %}

    <script src="{% static 'home/slider.js' %}"></script>
  </div>
{% endblock %}

{% block extra_scripts %}
{{ block.super }}
{% endblock %}
